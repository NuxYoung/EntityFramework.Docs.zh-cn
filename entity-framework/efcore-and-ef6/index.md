---
title: 比较 EF6 和 EF Core
description: 有关如何在 EF6 与 EF Core 之间进行选择的指导。
author: ajcvickers
ms.date: 01/23/2019
ms.assetid: a6b9cd22-6803-4c6c-a4d4-21147c0a81cb
uid: efcore-and-ef6/index
ms.openlocfilehash: 8e99cd9863d9f206ef3ae4d68226283019db835f
ms.sourcegitcommit: 7c3939504bb9da3f46bea3443638b808c04227c2
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/09/2020
ms.locfileid: "89619750"
---
# <a name="compare-ef-core--ef6"></a><span data-ttu-id="7b46b-103">比较 EF Core 和 EF6</span><span class="sxs-lookup"><span data-stu-id="7b46b-103">Compare EF Core & EF6</span></span>

## <a name="ef-core"></a><span data-ttu-id="7b46b-104">EF Core</span><span class="sxs-lookup"><span data-stu-id="7b46b-104">EF Core</span></span>

<span data-ttu-id="7b46b-105">Entity Framework Core ([EF Core](xref:core/index)) 是适用于 .NET 的新式对象数据库映射器。</span><span class="sxs-lookup"><span data-stu-id="7b46b-105">Entity Framework Core ([EF Core](xref:core/index)) is a modern object-database mapper for .NET.</span></span> <span data-ttu-id="7b46b-106">它支持 LINQ 查询、更改跟踪、更新和架构迁移。</span><span class="sxs-lookup"><span data-stu-id="7b46b-106">It supports LINQ queries, change tracking, updates, and schema migrations.</span></span>

<span data-ttu-id="7b46b-107">EF Core 通过[数据库提供程序插件模型](xref:core/providers/index)与 SQL Server/SQL Azure、SQLite、Azure Cosmos DB、MySQL、PostgreSQL 和更多数据库配合使用。</span><span class="sxs-lookup"><span data-stu-id="7b46b-107">EF Core works with SQL Server/SQL Azure, SQLite, Azure Cosmos DB, MySQL, PostgreSQL, and many more databases through a [database provider plugin model](xref:core/providers/index).</span></span>

## <a name="ef6"></a><span data-ttu-id="7b46b-108">EF6</span><span class="sxs-lookup"><span data-stu-id="7b46b-108">EF6</span></span>

<span data-ttu-id="7b46b-109">Entity Framework 6 ([EF6](xref:ef6/index)) 是专为 .NET Framework 设计的对象关系映射器，但支持 .NET Core。</span><span class="sxs-lookup"><span data-stu-id="7b46b-109">Entity Framework 6 ([EF6](xref:ef6/index)) is an object-relational mapper designed for .NET Framework but with support for .NET Core.</span></span> <span data-ttu-id="7b46b-110">EF6 是一款受支持的稳定产品，但我们不再对其进行积极开发。</span><span class="sxs-lookup"><span data-stu-id="7b46b-110">EF6 is a stable, supported product, but is no longer being actively developed.</span></span>

## <a name="feature-comparison"></a><span data-ttu-id="7b46b-111">功能比较</span><span class="sxs-lookup"><span data-stu-id="7b46b-111">Feature comparison</span></span>

<span data-ttu-id="7b46b-112">EF Core 提供了不会在 EF6 中实现的新功能。</span><span class="sxs-lookup"><span data-stu-id="7b46b-112">EF Core offers new features that won't be implemented in EF6.</span></span> <span data-ttu-id="7b46b-113">但是，并非所有 EF6 功能都已在 EF Core 中实现。</span><span class="sxs-lookup"><span data-stu-id="7b46b-113">However, not all EF6 features are currently implemented in EF Core.</span></span>

<span data-ttu-id="7b46b-114">下表比较了 EF Core 和 EF6 中可用的功能。</span><span class="sxs-lookup"><span data-stu-id="7b46b-114">The following tables compare the features available in EF Core and EF6.</span></span> <span data-ttu-id="7b46b-115">这只是大致比较，没有列出全部功能，也未解释不同 EF 版本中相同功能之间的差异。</span><span class="sxs-lookup"><span data-stu-id="7b46b-115">This is a high-level comparison and doesn't list every feature or explain differences between the same feature in different EF versions.</span></span>

<span data-ttu-id="7b46b-116">EF Core 列指出了功能首次出现的产品版本。</span><span class="sxs-lookup"><span data-stu-id="7b46b-116">The EF Core column indicates the product version in which the feature first appeared.</span></span>

### <a name="creating-a-model"></a><span data-ttu-id="7b46b-117">创建模型</span><span class="sxs-lookup"><span data-stu-id="7b46b-117">Creating a model</span></span>

| <span data-ttu-id="7b46b-118">**功能**</span><span class="sxs-lookup"><span data-stu-id="7b46b-118">**Feature**</span></span>                                           | <span data-ttu-id="7b46b-119">**EF6.4**</span><span class="sxs-lookup"><span data-stu-id="7b46b-119">**EF6.4**</span></span>| <span data-ttu-id="7b46b-120">**EF Core**</span><span class="sxs-lookup"><span data-stu-id="7b46b-120">**EF Core**</span></span>                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| <span data-ttu-id="7b46b-121">基本类映射</span><span class="sxs-lookup"><span data-stu-id="7b46b-121">Basic class mapping</span></span>                                   | <span data-ttu-id="7b46b-122">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-122">Yes</span></span>      | <span data-ttu-id="7b46b-123">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-123">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-124">带有参数的构造函数</span><span class="sxs-lookup"><span data-stu-id="7b46b-124">Constructors with parameters</span></span>                          |          | <span data-ttu-id="7b46b-125">2.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-125">2.1</span></span>                                   |
| <span data-ttu-id="7b46b-126">属性值转换</span><span class="sxs-lookup"><span data-stu-id="7b46b-126">Property value conversions</span></span>                            |          | <span data-ttu-id="7b46b-127">2.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-127">2.1</span></span>                                   |
| <span data-ttu-id="7b46b-128">没有键的映射类型</span><span class="sxs-lookup"><span data-stu-id="7b46b-128">Mapped types with no keys</span></span>                             |          | <span data-ttu-id="7b46b-129">2.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-129">2.1</span></span>                                   |
| <span data-ttu-id="7b46b-130">约定</span><span class="sxs-lookup"><span data-stu-id="7b46b-130">Conventions</span></span>                                           | <span data-ttu-id="7b46b-131">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-131">Yes</span></span>      | <span data-ttu-id="7b46b-132">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-132">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-133">自定义约定</span><span class="sxs-lookup"><span data-stu-id="7b46b-133">Custom conventions</span></span>                                    | <span data-ttu-id="7b46b-134">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-134">Yes</span></span>      | <span data-ttu-id="7b46b-135">1.0（部分；[#214](https://github.com/dotnet/efcore/issues/214)）</span><span class="sxs-lookup"><span data-stu-id="7b46b-135">1.0 (partial; [#214](https://github.com/dotnet/efcore/issues/214))</span></span> |
| <span data-ttu-id="7b46b-136">数据注释</span><span class="sxs-lookup"><span data-stu-id="7b46b-136">Data annotations</span></span>                                      | <span data-ttu-id="7b46b-137">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-137">Yes</span></span>      | <span data-ttu-id="7b46b-138">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-138">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-139">Fluent API</span><span class="sxs-lookup"><span data-stu-id="7b46b-139">Fluent API</span></span>                                            | <span data-ttu-id="7b46b-140">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-140">Yes</span></span>      | <span data-ttu-id="7b46b-141">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-141">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-142">继承：每个层次结构一张表 (TPH)</span><span class="sxs-lookup"><span data-stu-id="7b46b-142">Inheritance: Table per hierarchy (TPH)</span></span>                | <span data-ttu-id="7b46b-143">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-143">Yes</span></span>      | <span data-ttu-id="7b46b-144">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-144">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-145">继承：每个类型一张表 (TPT)</span><span class="sxs-lookup"><span data-stu-id="7b46b-145">Inheritance: Table per type (TPT)</span></span>                     | <span data-ttu-id="7b46b-146">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-146">Yes</span></span>      | <span data-ttu-id="7b46b-147">计划在 5.0 版中推出 ([#2266](https://github.com/dotnet/efcore/issues/2266))</span><span class="sxs-lookup"><span data-stu-id="7b46b-147">Planned for 5.0 ([#2266](https://github.com/dotnet/efcore/issues/2266))</span></span> |
| <span data-ttu-id="7b46b-148">继承：每个具体类一张表 (TPC)</span><span class="sxs-lookup"><span data-stu-id="7b46b-148">Inheritance: Table per concrete class (TPC)</span></span>           | <span data-ttu-id="7b46b-149">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-149">Yes</span></span>      | <span data-ttu-id="7b46b-150">5.0 版的延伸目标 ([#3170](https://github.com/dotnet/efcore/issues/3170)) <sup>(1)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-150">Stretch for 5.0 ([#3170](https://github.com/dotnet/efcore/issues/3170)) <sup>(1)</sup></span></span> |
| <span data-ttu-id="7b46b-151">阴影状态属性</span><span class="sxs-lookup"><span data-stu-id="7b46b-151">Shadow state properties</span></span>                               |          | <span data-ttu-id="7b46b-152">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-152">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-153">备用键</span><span class="sxs-lookup"><span data-stu-id="7b46b-153">Alternate keys</span></span>                                        |          | <span data-ttu-id="7b46b-154">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-154">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-155">多对多导航</span><span class="sxs-lookup"><span data-stu-id="7b46b-155">Many-to-many navigations</span></span>                              | <span data-ttu-id="7b46b-156">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-156">Yes</span></span>      | <span data-ttu-id="7b46b-157">计划在 5.0 版中推出 ([#19003](https://github.com/dotnet/efcore/issues/19003))</span><span class="sxs-lookup"><span data-stu-id="7b46b-157">Planned for 5.0 ([#19003](https://github.com/dotnet/efcore/issues/19003))</span></span> |
| <span data-ttu-id="7b46b-158">多对多，无联接实体</span><span class="sxs-lookup"><span data-stu-id="7b46b-158">Many-to-many without join entity</span></span>                      | <span data-ttu-id="7b46b-159">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-159">Yes</span></span>      | <span data-ttu-id="7b46b-160">积压工作 ([#1368](https://github.com/dotnet/efcore/issues/1368))</span><span class="sxs-lookup"><span data-stu-id="7b46b-160">On the backlog ([#1368](https://github.com/dotnet/efcore/issues/1368))</span></span> |
| <span data-ttu-id="7b46b-161">密钥生成：数据库</span><span class="sxs-lookup"><span data-stu-id="7b46b-161">Key generation: Database</span></span>                              | <span data-ttu-id="7b46b-162">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-162">Yes</span></span>      | <span data-ttu-id="7b46b-163">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-163">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-164">密钥生成：客户端</span><span class="sxs-lookup"><span data-stu-id="7b46b-164">Key generation: Client</span></span>                                |          | <span data-ttu-id="7b46b-165">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-165">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-166">复杂/已拥有类型</span><span class="sxs-lookup"><span data-stu-id="7b46b-166">Complex/owned types</span></span>                                   | <span data-ttu-id="7b46b-167">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-167">Yes</span></span>      | <span data-ttu-id="7b46b-168">2.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-168">2.0</span></span>                                   |
| <span data-ttu-id="7b46b-169">空间数据</span><span class="sxs-lookup"><span data-stu-id="7b46b-169">Spatial data</span></span>                                          | <span data-ttu-id="7b46b-170">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-170">Yes</span></span>      | <span data-ttu-id="7b46b-171">2.2</span><span class="sxs-lookup"><span data-stu-id="7b46b-171">2.2</span></span>                                   |
| <span data-ttu-id="7b46b-172">模型格式：代码</span><span class="sxs-lookup"><span data-stu-id="7b46b-172">Model format: Code</span></span>                                    | <span data-ttu-id="7b46b-173">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-173">Yes</span></span>      | <span data-ttu-id="7b46b-174">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-174">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-175">从数据库创建模型：命令行</span><span class="sxs-lookup"><span data-stu-id="7b46b-175">Create model from database: Command line</span></span>              | <span data-ttu-id="7b46b-176">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-176">Yes</span></span>      | <span data-ttu-id="7b46b-177">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-177">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-178">从数据库更新模型</span><span class="sxs-lookup"><span data-stu-id="7b46b-178">Update model from database</span></span>                            | <span data-ttu-id="7b46b-179">部分</span><span class="sxs-lookup"><span data-stu-id="7b46b-179">Partial</span></span>  | <span data-ttu-id="7b46b-180">积压工作 ([#831](https://github.com/dotnet/efcore/issues/831))</span><span class="sxs-lookup"><span data-stu-id="7b46b-180">On the backlog ([#831](https://github.com/dotnet/efcore/issues/831))</span></span> |
| <span data-ttu-id="7b46b-181">全局查询筛选器</span><span class="sxs-lookup"><span data-stu-id="7b46b-181">Global query filters</span></span>                                  |          | <span data-ttu-id="7b46b-182">2.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-182">2.0</span></span>                                   |
| <span data-ttu-id="7b46b-183">表拆分</span><span class="sxs-lookup"><span data-stu-id="7b46b-183">Table splitting</span></span>                                       | <span data-ttu-id="7b46b-184">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-184">Yes</span></span>      | <span data-ttu-id="7b46b-185">2.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-185">2.0</span></span>                                   |
| <span data-ttu-id="7b46b-186">实体拆分</span><span class="sxs-lookup"><span data-stu-id="7b46b-186">Entity splitting</span></span>                                      | <span data-ttu-id="7b46b-187">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-187">Yes</span></span>      | <span data-ttu-id="7b46b-188">5.0 版的延伸目标 ([#620](https://github.com/dotnet/efcore/issues/620)) <sup>(1)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-188">Stretch for 5.0 ([#620](https://github.com/dotnet/efcore/issues/620)) <sup>(1)</sup></span></span> |
| <span data-ttu-id="7b46b-189">数据库标量函数映射</span><span class="sxs-lookup"><span data-stu-id="7b46b-189">Database scalar function mapping</span></span>                      | <span data-ttu-id="7b46b-190">差</span><span class="sxs-lookup"><span data-stu-id="7b46b-190">Poor</span></span>     | <span data-ttu-id="7b46b-191">2.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-191">2.0</span></span>                                   |
| <span data-ttu-id="7b46b-192">字段映射</span><span class="sxs-lookup"><span data-stu-id="7b46b-192">Field mapping</span></span>                                         |          | <span data-ttu-id="7b46b-193">1.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-193">1.1</span></span>                                   |
| <span data-ttu-id="7b46b-194">可为空引用类型 (C# 8.0)</span><span class="sxs-lookup"><span data-stu-id="7b46b-194">Nullable reference types (C# 8.0)</span></span>                     |          | <span data-ttu-id="7b46b-195">3.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-195">3.0</span></span>                                   |
| <span data-ttu-id="7b46b-196">模型的图形可视化效果</span><span class="sxs-lookup"><span data-stu-id="7b46b-196">Graphical visualization of model</span></span>                      | <span data-ttu-id="7b46b-197">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-197">Yes</span></span>      | <span data-ttu-id="7b46b-198">未计划支持 <sup>(2)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-198">No support planned <sup>(2)</sup></span></span>     |
| <span data-ttu-id="7b46b-199">图形模型编辑器</span><span class="sxs-lookup"><span data-stu-id="7b46b-199">Graphical model editor</span></span>                                | <span data-ttu-id="7b46b-200">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-200">Yes</span></span>      | <span data-ttu-id="7b46b-201">未计划支持 <sup>(2)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-201">No support planned <sup>(2)</sup></span></span>     |
| <span data-ttu-id="7b46b-202">模型格式：EDMX (XML)</span><span class="sxs-lookup"><span data-stu-id="7b46b-202">Model format: EDMX (XML)</span></span>                              | <span data-ttu-id="7b46b-203">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-203">Yes</span></span>      | <span data-ttu-id="7b46b-204">未计划支持 <sup>(2)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-204">No support planned <sup>(2)</sup></span></span>     |
| <span data-ttu-id="7b46b-205">从数据库创建模型：VS 向导</span><span class="sxs-lookup"><span data-stu-id="7b46b-205">Create model from database: VS wizard</span></span>                 | <span data-ttu-id="7b46b-206">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-206">Yes</span></span>      | <span data-ttu-id="7b46b-207">未计划支持 <sup>(2)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-207">No support planned <sup>(2)</sup></span></span>     |

### <a name="querying-data"></a><span data-ttu-id="7b46b-208">正在查询数据</span><span class="sxs-lookup"><span data-stu-id="7b46b-208">Querying data</span></span>

| <span data-ttu-id="7b46b-209">**功能**</span><span class="sxs-lookup"><span data-stu-id="7b46b-209">**Feature**</span></span>                                           | <span data-ttu-id="7b46b-210">**EF6.4**</span><span class="sxs-lookup"><span data-stu-id="7b46b-210">**EF6.4**</span></span>| <span data-ttu-id="7b46b-211">**EF Core**</span><span class="sxs-lookup"><span data-stu-id="7b46b-211">**EF Core**</span></span>                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| <span data-ttu-id="7b46b-212">LINQ 查询</span><span class="sxs-lookup"><span data-stu-id="7b46b-212">LINQ queries</span></span>                                          | <span data-ttu-id="7b46b-213">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-213">Yes</span></span>      | <span data-ttu-id="7b46b-214">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-214">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-215">可读内容生成的 SQL</span><span class="sxs-lookup"><span data-stu-id="7b46b-215">Readable generated SQL</span></span>                                | <span data-ttu-id="7b46b-216">差</span><span class="sxs-lookup"><span data-stu-id="7b46b-216">Poor</span></span>     | <span data-ttu-id="7b46b-217">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-217">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-218">GroupBy 转换</span><span class="sxs-lookup"><span data-stu-id="7b46b-218">GroupBy translation</span></span>                                   | <span data-ttu-id="7b46b-219">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-219">Yes</span></span>      | <span data-ttu-id="7b46b-220">2.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-220">2.1</span></span>                                   |
| <span data-ttu-id="7b46b-221">加载相关数据：预先加载</span><span class="sxs-lookup"><span data-stu-id="7b46b-221">Loading related data: Eager</span></span>                           | <span data-ttu-id="7b46b-222">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-222">Yes</span></span>      | <span data-ttu-id="7b46b-223">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-223">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-224">加载相关数据：预先加载派生类型</span><span class="sxs-lookup"><span data-stu-id="7b46b-224">Loading related data: Eager loading for derived types</span></span> |          | <span data-ttu-id="7b46b-225">2.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-225">2.1</span></span>                                   |
| <span data-ttu-id="7b46b-226">加载相关数据：延迟加载</span><span class="sxs-lookup"><span data-stu-id="7b46b-226">Loading related data: Lazy</span></span>                            | <span data-ttu-id="7b46b-227">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-227">Yes</span></span>      | <span data-ttu-id="7b46b-228">2.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-228">2.1</span></span>                                   |
| <span data-ttu-id="7b46b-229">加载相关数据：显式加载</span><span class="sxs-lookup"><span data-stu-id="7b46b-229">Loading related data: Explicit</span></span>                        | <span data-ttu-id="7b46b-230">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-230">Yes</span></span>      | <span data-ttu-id="7b46b-231">1.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-231">1.1</span></span>                                   |
| <span data-ttu-id="7b46b-232">原始 SQL 查询：实体类型</span><span class="sxs-lookup"><span data-stu-id="7b46b-232">Raw SQL queries: Entity types</span></span>                         | <span data-ttu-id="7b46b-233">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-233">Yes</span></span>      | <span data-ttu-id="7b46b-234">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-234">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-235">原生 SQL 查询：无键实体类型</span><span class="sxs-lookup"><span data-stu-id="7b46b-235">Raw SQL queries: Keyless entity types</span></span>                 | <span data-ttu-id="7b46b-236">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-236">Yes</span></span>      | <span data-ttu-id="7b46b-237">2.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-237">2.1</span></span>                                   |
| <span data-ttu-id="7b46b-238">原始 SQL 查询：使用 LINQ 编写</span><span class="sxs-lookup"><span data-stu-id="7b46b-238">Raw SQL queries: Composing with LINQ</span></span>                  |          | <span data-ttu-id="7b46b-239">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-239">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-240">显式编译的查询</span><span class="sxs-lookup"><span data-stu-id="7b46b-240">Explicitly compiled queries</span></span>                           | <span data-ttu-id="7b46b-241">差</span><span class="sxs-lookup"><span data-stu-id="7b46b-241">Poor</span></span>     | <span data-ttu-id="7b46b-242">2.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-242">2.0</span></span>                                   |
| <span data-ttu-id="7b46b-243">await foreach (C# 8.0)</span><span class="sxs-lookup"><span data-stu-id="7b46b-243">await foreach (C# 8.0)</span></span>                                |          | <span data-ttu-id="7b46b-244">3.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-244">3.0</span></span>                                   |
| <span data-ttu-id="7b46b-245">基于文本的查询语言（实体 SQL）</span><span class="sxs-lookup"><span data-stu-id="7b46b-245">Text-based query language (Entity SQL)</span></span>                | <span data-ttu-id="7b46b-246">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-246">Yes</span></span>      | <span data-ttu-id="7b46b-247">未计划支持 <sup>(2)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-247">No support planned <sup>(2)</sup></span></span>     |

### <a name="saving-data"></a><span data-ttu-id="7b46b-248">保存数据</span><span class="sxs-lookup"><span data-stu-id="7b46b-248">Saving data</span></span>

| <span data-ttu-id="7b46b-249">**功能**</span><span class="sxs-lookup"><span data-stu-id="7b46b-249">**Feature**</span></span>                                           | <span data-ttu-id="7b46b-250">**EF6.4**</span><span class="sxs-lookup"><span data-stu-id="7b46b-250">**EF6.4**</span></span>| <span data-ttu-id="7b46b-251">**EF Core**</span><span class="sxs-lookup"><span data-stu-id="7b46b-251">**EF Core**</span></span>                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| <span data-ttu-id="7b46b-252">更改跟踪：快照</span><span class="sxs-lookup"><span data-stu-id="7b46b-252">Change tracking: Snapshot</span></span>                             | <span data-ttu-id="7b46b-253">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-253">Yes</span></span>      | <span data-ttu-id="7b46b-254">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-254">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-255">更改追踪：通知</span><span class="sxs-lookup"><span data-stu-id="7b46b-255">Change tracking: Notification</span></span>                         | <span data-ttu-id="7b46b-256">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-256">Yes</span></span>      | <span data-ttu-id="7b46b-257">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-257">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-258">更改跟踪：代理</span><span class="sxs-lookup"><span data-stu-id="7b46b-258">Change tracking: Proxies</span></span>                              | <span data-ttu-id="7b46b-259">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-259">Yes</span></span>      | <span data-ttu-id="7b46b-260">已在 5.0 版中合并 ([#10949](https://github.com/dotnet/efcore/issues/10949))</span><span class="sxs-lookup"><span data-stu-id="7b46b-260">Merged for 5.0 ([#10949](https://github.com/dotnet/efcore/issues/10949))</span></span> |
| <span data-ttu-id="7b46b-261">访问跟踪的状态</span><span class="sxs-lookup"><span data-stu-id="7b46b-261">Accessing tracked state</span></span>                               | <span data-ttu-id="7b46b-262">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-262">Yes</span></span>      | <span data-ttu-id="7b46b-263">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-263">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-264">开放式并发</span><span class="sxs-lookup"><span data-stu-id="7b46b-264">Optimistic concurrency</span></span>                                | <span data-ttu-id="7b46b-265">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-265">Yes</span></span>      | <span data-ttu-id="7b46b-266">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-266">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-267">事务</span><span class="sxs-lookup"><span data-stu-id="7b46b-267">Transactions</span></span>                                          | <span data-ttu-id="7b46b-268">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-268">Yes</span></span>      | <span data-ttu-id="7b46b-269">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-269">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-270">批处理语句</span><span class="sxs-lookup"><span data-stu-id="7b46b-270">Batching of statements</span></span>                                |          | <span data-ttu-id="7b46b-271">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-271">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-272">存储过程映射</span><span class="sxs-lookup"><span data-stu-id="7b46b-272">Stored procedure mapping</span></span>                              | <span data-ttu-id="7b46b-273">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-273">Yes</span></span>      | <span data-ttu-id="7b46b-274">积压工作 ([#245](https://github.com/dotnet/efcore/issues/245))</span><span class="sxs-lookup"><span data-stu-id="7b46b-274">On the backlog ([#245](https://github.com/dotnet/efcore/issues/245))</span></span> |
| <span data-ttu-id="7b46b-275">断开连接低级别 API 图形</span><span class="sxs-lookup"><span data-stu-id="7b46b-275">Disconnected graph low-level APIs</span></span>                     | <span data-ttu-id="7b46b-276">差</span><span class="sxs-lookup"><span data-stu-id="7b46b-276">Poor</span></span>     | <span data-ttu-id="7b46b-277">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-277">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-278">断开连接端到端图形</span><span class="sxs-lookup"><span data-stu-id="7b46b-278">Disconnected graph End-to-end</span></span>                         |          | <span data-ttu-id="7b46b-279">1.0（部分；[#5536](https://github.com/dotnet/efcore/issues/5536)）</span><span class="sxs-lookup"><span data-stu-id="7b46b-279">1.0 (partial; [#5536](https://github.com/dotnet/efcore/issues/5536))</span></span> |

### <a name="other-features"></a><span data-ttu-id="7b46b-280">其他功能</span><span class="sxs-lookup"><span data-stu-id="7b46b-280">Other features</span></span>

| <span data-ttu-id="7b46b-281">**功能**</span><span class="sxs-lookup"><span data-stu-id="7b46b-281">**Feature**</span></span>                                           | <span data-ttu-id="7b46b-282">**EF6.4**</span><span class="sxs-lookup"><span data-stu-id="7b46b-282">**EF6.4**</span></span>| <span data-ttu-id="7b46b-283">**EF Core**</span><span class="sxs-lookup"><span data-stu-id="7b46b-283">**EF Core**</span></span>                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| <span data-ttu-id="7b46b-284">迁移</span><span class="sxs-lookup"><span data-stu-id="7b46b-284">Migrations</span></span>                                            | <span data-ttu-id="7b46b-285">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-285">Yes</span></span>      | <span data-ttu-id="7b46b-286">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-286">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-287">数据库创建/删除 API</span><span class="sxs-lookup"><span data-stu-id="7b46b-287">Database creation/deletion APIs</span></span>                       | <span data-ttu-id="7b46b-288">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-288">Yes</span></span>      | <span data-ttu-id="7b46b-289">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-289">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-290">种子数据</span><span class="sxs-lookup"><span data-stu-id="7b46b-290">Seed data</span></span>                                             | <span data-ttu-id="7b46b-291">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-291">Yes</span></span>      | <span data-ttu-id="7b46b-292">2.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-292">2.1</span></span>                                   |
| <span data-ttu-id="7b46b-293">连接复原</span><span class="sxs-lookup"><span data-stu-id="7b46b-293">Connection resiliency</span></span>                                 | <span data-ttu-id="7b46b-294">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-294">Yes</span></span>      | <span data-ttu-id="7b46b-295">1.1</span><span class="sxs-lookup"><span data-stu-id="7b46b-295">1.1</span></span>                                   |
| <span data-ttu-id="7b46b-296">拦截器</span><span class="sxs-lookup"><span data-stu-id="7b46b-296">Interceptors</span></span>                                          | <span data-ttu-id="7b46b-297">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-297">Yes</span></span>      | <span data-ttu-id="7b46b-298">3.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-298">3.0</span></span>                                   |
| <span data-ttu-id="7b46b-299">事件</span><span class="sxs-lookup"><span data-stu-id="7b46b-299">Events</span></span>                                                | <span data-ttu-id="7b46b-300">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-300">Yes</span></span>      | <span data-ttu-id="7b46b-301">3.0（部分；[#626](https://github.com/dotnet/efcore/issues/626)）</span><span class="sxs-lookup"><span data-stu-id="7b46b-301">3.0 (partial; [#626](https://github.com/dotnet/efcore/issues/626))</span></span> |
| <span data-ttu-id="7b46b-302">简单的日志记录 (Database.Log)</span><span class="sxs-lookup"><span data-stu-id="7b46b-302">Simple Logging (Database.Log)</span></span>                         | <span data-ttu-id="7b46b-303">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-303">Yes</span></span>      | <span data-ttu-id="7b46b-304">已在 5.0 版中合并 ([#1199](https://github.com/dotnet/efcore/issues/1199))</span><span class="sxs-lookup"><span data-stu-id="7b46b-304">Merged for 5.0 ([#1199](https://github.com/dotnet/efcore/issues/1199))</span></span> |
| <span data-ttu-id="7b46b-305">DbContext 池</span><span class="sxs-lookup"><span data-stu-id="7b46b-305">DbContext pooling</span></span>                                     |          | <span data-ttu-id="7b46b-306">2.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-306">2.0</span></span>                                   |

### <a name="database-providers-sup3sup"></a><span data-ttu-id="7b46b-307">数据库提供程序<sup>(3)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-307">Database providers <sup>(3)</sup></span></span>

| <span data-ttu-id="7b46b-308">**功能**</span><span class="sxs-lookup"><span data-stu-id="7b46b-308">**Feature**</span></span>                                           | <span data-ttu-id="7b46b-309">**EF6.4**</span><span class="sxs-lookup"><span data-stu-id="7b46b-309">**EF6.4**</span></span>| <span data-ttu-id="7b46b-310">**EF Core**</span><span class="sxs-lookup"><span data-stu-id="7b46b-310">**EF Core**</span></span>                           |
|:------------------------------------------------------|:---------|:--------------------------------------|
| <span data-ttu-id="7b46b-311">SQL Server</span><span class="sxs-lookup"><span data-stu-id="7b46b-311">SQL Server</span></span>                                            | <span data-ttu-id="7b46b-312">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-312">Yes</span></span>      | <span data-ttu-id="7b46b-313">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-313">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-314">MySQL</span><span class="sxs-lookup"><span data-stu-id="7b46b-314">MySQL</span></span>                                                 | <span data-ttu-id="7b46b-315">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-315">Yes</span></span>      | <span data-ttu-id="7b46b-316">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-316">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-317">PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="7b46b-317">PostgreSQL</span></span>                                            | <span data-ttu-id="7b46b-318">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-318">Yes</span></span>      | <span data-ttu-id="7b46b-319">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-319">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-320">Oracle</span><span class="sxs-lookup"><span data-stu-id="7b46b-320">Oracle</span></span>                                                | <span data-ttu-id="7b46b-321">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-321">Yes</span></span>      | <span data-ttu-id="7b46b-322">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-322">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-323">SQLite</span><span class="sxs-lookup"><span data-stu-id="7b46b-323">SQLite</span></span>                                                | <span data-ttu-id="7b46b-324">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-324">Yes</span></span>      | <span data-ttu-id="7b46b-325">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-325">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-326">SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="7b46b-326">SQL Server Compact</span></span>                                    | <span data-ttu-id="7b46b-327">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-327">Yes</span></span>      | <span data-ttu-id="7b46b-328">1.0 <sup>(4)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-328">1.0 <sup>(4)</sup></span></span>                    |
| <span data-ttu-id="7b46b-329">DB2</span><span class="sxs-lookup"><span data-stu-id="7b46b-329">DB2</span></span>                                                   | <span data-ttu-id="7b46b-330">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-330">Yes</span></span>      | <span data-ttu-id="7b46b-331">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-331">1.0</span></span>                                   |
| <span data-ttu-id="7b46b-332">Firebird</span><span class="sxs-lookup"><span data-stu-id="7b46b-332">Firebird</span></span>                                              | <span data-ttu-id="7b46b-333">是</span><span class="sxs-lookup"><span data-stu-id="7b46b-333">Yes</span></span>      | <span data-ttu-id="7b46b-334">2.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-334">2.0</span></span>                                   |
| <span data-ttu-id="7b46b-335">Jet (Microsoft Access)</span><span class="sxs-lookup"><span data-stu-id="7b46b-335">Jet (Microsoft Access)</span></span>                                |          | <span data-ttu-id="7b46b-336">2.0 <sup>(4)</sup></span><span class="sxs-lookup"><span data-stu-id="7b46b-336">2.0 <sup>(4)</sup></span></span>                    |
| <span data-ttu-id="7b46b-337">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="7b46b-337">Azure Cosmos DB</span></span>                                       |          | <span data-ttu-id="7b46b-338">3.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-338">3.0</span></span>                                   |
| <span data-ttu-id="7b46b-339">内存中（用于测试）</span><span class="sxs-lookup"><span data-stu-id="7b46b-339">In-memory (for testing)</span></span>                               |          | <span data-ttu-id="7b46b-340">1.0</span><span class="sxs-lookup"><span data-stu-id="7b46b-340">1.0</span></span>                                   |

<span data-ttu-id="7b46b-341"><sup>1</sup> 在给定版本中，不太可能实现延伸目标。</span><span class="sxs-lookup"><span data-stu-id="7b46b-341"><sup>1</sup> Stretch goals are not likely to be achieved for a given release.</span></span> <span data-ttu-id="7b46b-342">但如果一切顺利，我们将尝试加入相关功能。</span><span class="sxs-lookup"><span data-stu-id="7b46b-342">However, if things go well, then we will try to pull them in.</span></span>

<span data-ttu-id="7b46b-343"><sup>2</sup> EF Core 中不会实现某些 EF6 功能。</span><span class="sxs-lookup"><span data-stu-id="7b46b-343"><sup>2</sup> Some EF6 features will not be implemented in EF Core.</span></span> <span data-ttu-id="7b46b-344">这些功能依赖于 EF6 的基础实体数据模型 (EDM)，并且/或者是复杂功能，投资回报率相对较低。</span><span class="sxs-lookup"><span data-stu-id="7b46b-344">These features either depend on EF6's underlying Entity Data Model (EDM) and/or are complex features with relatively low return on investment.</span></span> <span data-ttu-id="7b46b-345">欢迎提出反馈，但是，尽管 EF Core 支持许多在 EF6 中无法实现的功能，反过来，EF Core 支持 EF6 的所有功能却并不可行。</span><span class="sxs-lookup"><span data-stu-id="7b46b-345">We always welcome feedback, but while EF Core enables many things not possible in EF6, it is conversely not feasible for EF Core to support all the features of EF6.</span></span>

<span data-ttu-id="7b46b-346"><sup>3</sup> 更新到新的 EF Core 主版本时，第三方实现的 EF Core 数据库提供程序可能延迟。</span><span class="sxs-lookup"><span data-stu-id="7b46b-346"><sup>3</sup> EF Core database providers implemented by third-parties may be delayed in updating to new major versions of EF Core.</span></span> <span data-ttu-id="7b46b-347">有关详细信息，请参阅[数据库提供程序](xref:core/providers/index)。</span><span class="sxs-lookup"><span data-stu-id="7b46b-347">See [Database Providers](xref:core/providers/index) for more information.</span></span>

<span data-ttu-id="7b46b-348"><sup>4</sup> SQL Server Compact 和 Jet 提供程序仅适用于 .NET Framework（而不适用于 .NET Core）。</span><span class="sxs-lookup"><span data-stu-id="7b46b-348"><sup>4</sup> The SQL Server Compact and Jet providers only work on .NET Framework (not on .NET Core).</span></span>

### <a name="supported-platforms"></a><span data-ttu-id="7b46b-349">受支持的平台</span><span class="sxs-lookup"><span data-stu-id="7b46b-349">Supported platforms</span></span>

<span data-ttu-id="7b46b-350">EF Core 3.1 通过使用 .NET Standard 2.0 在 .NET Core 和 .NET Framework 上运行。</span><span class="sxs-lookup"><span data-stu-id="7b46b-350">EF Core 3.1 runs on .NET Core and .NET Framework, through the use of .NET Standard 2.0.</span></span> <span data-ttu-id="7b46b-351">但 EF Core 5.0 不会在 .NET Framework 上运行。</span><span class="sxs-lookup"><span data-stu-id="7b46b-351">However, EF Core 5.0 will not run on .NET Framework.</span></span> <span data-ttu-id="7b46b-352">有关更多详细信息，请参阅[平台](xref:core/platforms/index)。</span><span class="sxs-lookup"><span data-stu-id="7b46b-352">See [Platforms](xref:core/platforms/index) for more details.</span></span>

<span data-ttu-id="7b46b-353">EF6.4 通过多目标在 .NET Core 和 .NET Framework 上运行。</span><span class="sxs-lookup"><span data-stu-id="7b46b-353">EF6.4 runs on .NET Core and .NET Framework, through multi-targeting.</span></span>

## <a name="guidance-for-new-applications"></a><span data-ttu-id="7b46b-354">针对新应用程序的选择指南</span><span class="sxs-lookup"><span data-stu-id="7b46b-354">Guidance for new applications</span></span>

<span data-ttu-id="7b46b-355">除非应用需要[仅在 .NET Framework 上受支持](/dotnet/standard/choosing-core-framework-server)的内容，否则对于所有新应用程序都在 .NET Core 上使用 EF Core。</span><span class="sxs-lookup"><span data-stu-id="7b46b-355">Use EF Core on .NET Core for all new applications unless the app needs something that is [only supported on .NET Framework](/dotnet/standard/choosing-core-framework-server).</span></span>

## <a name="guidance-for-existing-ef6-applications"></a><span data-ttu-id="7b46b-356">针对现有 EF6 应用程序的选择指南</span><span class="sxs-lookup"><span data-stu-id="7b46b-356">Guidance for existing EF6 applications</span></span>

<span data-ttu-id="7b46b-357">EF Core 不是 EF6 的直接替换项。</span><span class="sxs-lookup"><span data-stu-id="7b46b-357">EF Core is not a drop-in replacement for EF6.</span></span> <span data-ttu-id="7b46b-358">从 EF6 迁移到 EF Core 可能需要更改应用程序。</span><span class="sxs-lookup"><span data-stu-id="7b46b-358">Moving from EF6 to EF Core will likely require changes to your application.</span></span>

<span data-ttu-id="7b46b-359">将 EF6 应用迁移到 .NET Core 时：</span><span class="sxs-lookup"><span data-stu-id="7b46b-359">When moving an EF6 app to .NET Core:</span></span>

* <span data-ttu-id="7b46b-360">如果数据访问代码稳定且不太可能开发或需要新功能，请继续使用 EF6。</span><span class="sxs-lookup"><span data-stu-id="7b46b-360">Keep using EF6 if the data access code is stable and not likely to evolve or need new features.</span></span>
* <span data-ttu-id="7b46b-361">如果数据访问代码不断演变，或应用需要仅在 EF Core 中提供的新功能，请迁移到 EF Core。</span><span class="sxs-lookup"><span data-stu-id="7b46b-361">Port to EF Core if the data access code is evolving or if the app needs new features only available in EF Core.</span></span>
* <span data-ttu-id="7b46b-362">迁移到 EF Core 通常也是为了提高性能。</span><span class="sxs-lookup"><span data-stu-id="7b46b-362">Porting to EF Core is also often done for performance.</span></span> <span data-ttu-id="7b46b-363">但是，并非所有方案都可提高性能，因此请先进行分析。</span><span class="sxs-lookup"><span data-stu-id="7b46b-363">However, not all scenarios are faster, so do some profiling first.</span></span>

<span data-ttu-id="7b46b-364">有关详细信息，请参阅[从 EF6 到 EF Core 的迁移](xref:efcore-and-ef6/porting/index)。</span><span class="sxs-lookup"><span data-stu-id="7b46b-364">See [Porting from EF6 to EF Core](xref:efcore-and-ef6/porting/index) for more information.</span></span>
